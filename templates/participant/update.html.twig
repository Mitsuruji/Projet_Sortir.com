{% extends 'base.html.twig' %}

{% block title %}Update | {{ parent() }}{% endblock %}

{% block body %}
    <div id="formUpdate">
        {% if app.user.id == participant.id or is_granted("ROLE_ADMIN")%}
            <h1>Update</h1>
            {{ form_start(registrationForm) }}

            {{ form_row(registrationForm.username) }}
            {{ form_row(registrationForm.telephone) }}
            {{ form_row(registrationForm.campus) }}
            {{ form_row(registrationForm.photo) }}

            {% if is_granted("ROLE_ADMIN")%}
                {{ form_row(registrationForm.nom) }}
                {{ form_row(registrationForm.prenom) }}
                {{ form_row(registrationForm.mail) }}
                {{ form_row(registrationForm.administrateur) }}
                {{ form_row(registrationForm.actif) }}

            {% endif %}
            <button type="submit" class="btn btn-lg btn-success">Update</button>

            {{ form_end(registrationForm) }}

            <div>
                <a href="{{ path('participant_updatePassword',{'id':participant.id}) }}"><button class="btn btn-primary">Modifier mot de passe</button></a>
                {% if participant.photo %}
                    <a href="{{ path('participant_supprimerPhoto', {'id':participant.id}) }}"><button class="btn btn-danger">Supprimer la photo</button></a>
                {% endif %}
                {% if is_granted("ROLE_ADMIN")%}
                    <a href="{{ path('admin_supprimerParticipant', {'id':participant.id}) }}"><button class="btn btn-danger">Supprimer le participant</button></a>
                {% endif %}
            </div>
                <a href="{{ path('participant_details', {'id':participant.id}) }}"><button type="reset" class="btn btn-info">Retour</button></a>

        {% else %}
            <h2>Erreur de navigation</h2>
                <a href="{{ path('sortie_search') }}"><button class="btn btn-info">Retour</button></a>
        {% endif %}
    </div>
{% endblock %}
